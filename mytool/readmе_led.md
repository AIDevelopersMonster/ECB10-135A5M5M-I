
---

```markdown
# LED Test (sysfs)

Данный модуль предназначен для тестирования и демонстрации работы светодиодов (LED),
подключённых к плате и управляемых через стандартную Linux-подсистему **LED class (sysfs)**.

Тест ориентирован на работу из пользовательского пространства Linux и использует
интерфейсы ядра, доступные в каталоге:

```

/sys/class/leds/

```

Модуль реализован в виде отдельной вкладки GUI (Tkinter) и может использоваться:
- как **самостоятельный инструмент тестирования**
- как **часть большого проекта** с комплексными тестами платы


## 1. Что тестируем

- Наличие LED-устройств в системе
- Ручное включение и выключение LED
- Текущий режим работы LED (trigger)
- Поддерживаемые триггеры ядра
- Аппаратную индикацию системных процессов:
  - heartbeat (признак «система жива»)
  - активность CPU
  - активность MMC/SD
- Программное мигание по таймеру


## 2. Используемый интерфейс ядра

Для каждого LED используется каталог вида:

```

/sys/class/leds/<led_name>/

```

Основные файлы:

| Файл        | Назначение |
|------------|------------|
| brightness | Ручное включение / выключение (0 / 1) |
| trigger    | Источник управления (режим работы LED) |
| delay_on   | Время включения (мс) для trigger=timer |
| delay_off  | Время выключения (мс) для trigger=timer |


## 3. Поддерживаемые режимы (trigger)

Конкретный список зависит от конфигурации ядра, но обычно доступно:

- `none`  
  Ручное управление через `brightness`

- `default-on`  
  LED всегда включён (ядро удерживает уровень)

- `heartbeat`  
  Пульсирующее мигание — индикатор «система работает»

- `timer`  
  Мигание с пользовательскими задержками `delay_on` / `delay_off`

- `cpu`, `cpu0`  
  Активность процессора (если включено в ядре)

- `mmc0`, `mmc1`  
  Активность SD / eMMC (если поддерживается драйвером)

Текущий активный trigger отображается в квадратных скобках, например:
```

[none] timer heartbeat cpu0 mmc0

```


## 4. Возможности GUI-вкладки

### Основные кнопки
- **Scan LEDs** — поиск доступных LED в `/sys/class/leds`
- **LED ON** — `brightness = 1`
- **LED OFF** — `brightness = 0`
- **Read state** — чтение текущего состояния LED

### Управление trigger
- Загрузка списка доступных trigger
- Установка выбранного trigger
- Быстрые кнопки:
  - heartbeat
  - cpu0
  - default-on
  - mmc0

### Таймер мигания
- Ввод `delay_on` и `delay_off` (в миллисекундах)
- Кнопка **Enable timer blink**
- Кнопка остановки мигания (возврат к `none`)


## 5. Типовые сценарии тестирования

### Проверка LED «на живую»
1. Выбрать LED
2. Установить `trigger = none`
3. Включить / выключить LED кнопками ON / OFF

### Индикация работы системы
- Установить `heartbeat`
- LED должен ритмично мигать постоянно

### Проверка таймера
1. Выбрать `timer`
2. Задать `delay_on = 200`, `delay_off = 200`
3. Наблюдать стабильное мигание

### Проверка активности накопителя
- Установить `mmc0`
- Выполнить операции чтения/записи
- LED мигает при активности


## 6. Важные замечания

- Наличие trigger **не гарантирует**, что он реально работает  
  (зависит от ядра, DT и драйверов)
- Управление требует прав root
- LED может быть физически подключён не напрямую к SoC, а через контроллер питания


## 7. Назначение модуля в проекте

Этот LED-тест:
- служит **быстрой аппаратной индикацией состояния платы**
- помогает **визуально демонстрировать работу ядра и драйверов**
- используется как **диагностический инструмент при отладке BSP**
- легко интегрируется в автоматизированные и ручные тесты

---

```
